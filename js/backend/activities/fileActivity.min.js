function $(e){return document.getElementById(e)}function q(e){return document.querySelector(e)}function showSnackbar(e,l=5e3){const t=q(".mdc-snackbar").MDCSnackbar;t.labelText=e,t.timeoutMs=l,t.open()}async function onStart(){console.log("<fileCrypto> Started activity");let e=null,l=null,t=null;const n=()=>{q("#in-file-path > .mdc-tooltip__surface").textContent=null==e?"No input file selected":"Selected input file: "+e,q("#keyfile-path > .mdc-tooltip__surface").textContent=null==l?"No keyfile selected":"Selected keyfile: "+l,q("#out-file-path > .mdc-tooltip__surface").textContent=null==t?"No output file selected":"Selected output file: "+t;const n=$("encButton"),c=$("decButton");e&&l&&t?e.match(/\.crypted$/gm)?(c.disabled=!1,n.disabled=!0):(n.disabled=!1,c.disabled=!0):(n.disabled=!0,c.disabled=!0)};$("selInput").onclick=(()=>{window.fileOps.fileOpen("Select Input File","Select File",["openFile"],[{name:"All Files",extensions:["*"]},{name:"Encrypted Files",extensions:["crypted"]}]).then(l=>{l.canceled?showSnackbar("File picker canceled"):(e=l.filePaths[0],n(),console.log("<fileCrypto> Selected input file",e))})}),$("selKeyfile").onclick=(()=>{window.fileOps.fileOpen("Select AES Keyfile","Select Keyfile",["openFile"],[{name:"AES Keyfiles",extensions:["aKey"]}]).then(e=>{e.canceled?showSnackbar("File picker canceled"):(l=e.filePaths[0],n(),console.log("<fileCrypto> Selected keyfile",l))})}),$("selOut").onclick=(()=>{if(null==e)return void showSnackbar("Select the input file first");let l,c,i;e.match(/\.crypted$/gm)?(l={name:"Decrypted File",extensions:[e.replace(/\.crypted$/gm,"").replace(/^.*\./gm,"")]},c="Decrypted file name: ",i="Select Decrypted File Location"):(l={name:"Encrypted File",extensions:[e.replace(/^.*\./gm,"")]},c="Encrypted file name: ",i="Select Encrypted File Location (.crypted will be added to end of filename)"),console.log(l),window.fileOps.filePick(i,c,[],[l],e.replace(/(\..*)$/gm,"")).then(l=>{l.canceled?showSnackbar("File picker canceled"):(t=l.filePath,e.match(/\.crypted$/gm)||(t+=".crypted"),n(),console.log("<fileCrypto> Selected output file",t))})}),$("encButton").onclick=(()=>{window.fileCrypto.encrypt(e,t,l).then(l=>{l?showSnackbar("Encryption of file failed. Please check that keyfiles are valid and input file is readable."):(showSnackbar(`Encrypted file saved at: ${t}`),console.debug("<fileCrypto:encrypt> Encrypted one file:",e,"Saved at:",t),t=null,e=null,n())})}),$("decButton").onclick=(()=>{window.fileCrypto.decrypt(e,t,l).then(l=>{l?showSnackbar("Encryption of file failed. Please check that keyfiles are valid and input file is readable."):(showSnackbar(`Decrypted file saved at: ${t}`),console.debug("<fileCrypto:encrypt> Decrypted one file:",e,"Saved at:",t),t=null,e=null,n())})})}function onStop(){console.log("<fileCrypto> Stopped activity file")}